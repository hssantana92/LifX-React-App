(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{59:function(t,e,a){},60:function(t,e,a){},73:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(20),s=a.n(o),r=(a(59),a(60),a(61),a(62),a(11)),l=a(12),c=a(15),h=a(14),p=a(24),u=a(26),d=a(39),g=a(38),b=a(2),f=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={lightInfo:t.props.data.lightInfo},t}return Object(l.a)(a,[{key:"togglePower",value:function(){var t=this.props.data.lightInfo[this.props.data.lightLabels.indexOf(this.props.name)].id,e="https://api.lifx.com/v1/lights/".concat(t,"/toggle");fetch(e,{method:"POST",headers:{Authorization:this.props.data.token}}).then((function(t){return t.json()})).then((function(t){})).catch((function(t){console.error(t)}))}},{key:"lightSwitch",value:function(){var t=this.props.data.lightLabels.indexOf(this.props.name),e=this.props.data.lightInfo[t].id,a="on"===this.props.data.lightInfo[t].power?"off":"on",n="https://api.lifx.com/v1/lights/".concat(e,"/state"),i={power:a};fetch(n,{method:"PUT",headers:{Authorization:this.props.data.token,"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(t){return t.json()})).then((function(t){console.log(t.results)})).catch((function(t){console.error(t)})),this.updatePowerValue(a,t),this.updateParentState()}},{key:"updatePowerValue",value:function(t,e){var a=this.state.lightInfo;a[e].power=t,this.setState({lightInfo:a})}},{key:"updateParentState",value:function(){this.props.onGetChildState(this.state.lightInfo)}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"row justify-content-md-center",children:Object(b.jsx)("div",{className:"col col-md-2",children:Object(b.jsx)(p.a,{variant:"primary",onClick:this.lightSwitch.bind(this),children:"Toggle Power"})})})})}}]),a}(n.Component),j=a(13),v=a(94),y=a(89),x=Object(j.a)({root:{color:"white"},track:{height:"1px",background:"linear-gradient(90deg, rgba(255,109,0,1) 0%, rgba(255,166,32,1) 16%, rgba(255,198,72,1) 32%, rgba(255,207,151,1) 48%, rgba(254,233,157,1) 64%, rgba(254,248,224,1) 80%, rgba(255,255,255,1) 96%)"},rail:{background:"linear-gradient(90deg, rgba(255,109,0,1) 0%, rgba(255,166,32,1) 16%, rgba(255,198,72,1) 32%, rgba(255,207,151,1) 48%, rgba(254,233,157,1) 64%, rgba(254,248,224,1) 80%, rgba(255,255,255,1) 96%)",height:"10px"},thumb:{marginTop:.01,border:"1px solid grey",color:"black",backgroundColor:"white"}})(v.a),m=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={lightColor:"3500",lightInfo:t.props.data.lightInfo},t}return Object(l.a)(a,[{key:"switchColor",value:function(){var t=this.props.data.lightLabels.indexOf(this.props.name),e=this.props.data.lightInfo[t].id,a="https://api.lifx.com/v1/lights/".concat(e,"/state"),n={color:{kelvin:this.state.lightColor}};fetch(a,{method:"PUT",headers:{Authorization:this.props.data.token,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){console.log(t.results)})).catch((function(t){console.error(t)})),this.updateColorValue(this.state.lightColor,t),this.updateParentState()}},{key:"updateColorValue",value:function(t,e){var a=this.state.lightInfo;a[e].color.kelvin=t,this.setState({lightInfo:a})}},{key:"updateParentState",value:function(){this.props.onGetChildState(this.state.lightInfo)}},{key:"valuetext",value:function(t){return t}},{key:"sliderChange",value:function(t,e){console.log(e),this.setState({lightColor:e}),this.switchColor()}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(y.a,{id:"non-linear-slider",gutterBottom:!0,children:"Switch Color"}),Object(b.jsx)(x,{defaultValue:this.props.data.lightInfo[this.props.data.lightLabels.indexOf(this.props.name)].color.kelvin,getAriaValueText:this.valuetext.bind(this),onChangeCommitted:this.sliderChange.bind(this),"aria-labelledby":"discrete-slider-small-steps",step:500,marks:!0,min:1500,max:4500,valueLabelDisplay:"off"})]})}}]),a}(n.Component),O=a(90),k=a(91),C=a(49),S=a.n(C),I=Object(j.a)((function(t){return{root:{width:"fit-content",border:"1px solid ".concat(t.palette.divider),margin:"auto",borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.paper,color:t.palette.text.secondary,"& svg":{margin:t.spacing(1.5)},"& hr":{margin:t.spacing(0,.5)}}}}))(O.a),w=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.data.lightLabels.indexOf(this.props.name),e=this.props.data.lightInfo[t].color.kelvin,a="",n="lightbulb icon";return 4500===e?(a="black",n="lightbulb outline icon"):4e3===e?a="rgb(254,248,224)":3500===e?a="rgb(254,233,157)":3e3===e?a="rgb(255,207,151)":2500===e?a="rgb(255,198,72)":2e3===e?a="rgb(255,166,32)":1500===e&&(a="rgb(254,109,0)"),Object(b.jsx)("div",{children:Object(b.jsxs)(I,{container:!0,alignItems:"center",children:[Object(b.jsx)(y.a,{style:{padding:"10px",color:"black",textDecoration:"none"},children:this.props.name}),Object(b.jsx)(k.a,{style:{height:"auto"},orientation:"vertical",flexItem:!0}),Object(b.jsx)(S.a,{style:{color:"on"===this.props.data.lightInfo[t].power?"green":"#eb2a2a",fontSize:"30px"}}),Object(b.jsx)(k.a,{style:{height:"auto"},orientation:"vertical",flexItem:!0}),Object(b.jsx)("i",{style:{fontSize:"25px",marginBottom:"15px",color:a},className:n})]})})}}]),a}(n.Component),T=Object(j.a)({root:{},track:{},rail:{},thumb:{}})(v.a),A=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={brightness:"1.0",lightInfo:t.props.data.lightInfo},t}return Object(l.a)(a,[{key:"brightnessSet",value:function(){var t=this.props.data.lightLabels.indexOf(this.props.name),e=this.props.data.lightInfo[t].id,a="https://api.lifx.com/v1/lights/".concat(e,"/state"),n={brightness:this.state.brightness};fetch(a,{method:"PUT",headers:{Authorization:this.props.data.token,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){console.log(t.results)})).catch((function(t){console.error(t)})),this.updateColorValue(this.state.brightness,t),this.updateParentState()}},{key:"updateColorValue",value:function(t,e){var a=this.state.lightInfo;a[e].brightness=t,this.setState({lightInfo:a})}},{key:"updateParentState",value:function(){this.props.onGetChildState(this.state.lightInfo)}},{key:"valuetext",value:function(t){return t}},{key:"sliderChange",value:function(t,e){console.log(e),this.setState({brightness:e}),this.brightnessSet()}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(y.a,{id:"non-linear-slider",gutterBottom:!0,children:"Adjust Brightness"}),Object(b.jsx)(T,{defaultValue:this.props.data.lightInfo[this.props.data.lightLabels.indexOf(this.props.name)].brightness,getAriaValueText:this.valuetext.bind(this),onChangeCommitted:this.sliderChange.bind(this),"aria-labelledby":"discrete-slider-small-steps",step:.1,marks:!0,min:0,max:1,valueLabelDisplay:"off"})]})}}]),a}(n.Component),L=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={lightInfo:"",lightLabels:[],token:"Bearer ".concat(t.props.apiKey)},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componenetDidUpdate",value:function(){console.log("update")}},{key:"getData",value:function(){var t=this;fetch("https://api.lifx.com/v1/lights/all",{method:"GET",headers:{Authorization:this.state.token}}).then((function(t){return t.json()})).then((function(e){t.setState({lightInfo:e});for(var a=0;a<t.state.lightInfo.length;a++){var n=t.state.lightLabels.concat(t.state.lightInfo[a].label);t.setState({lightLabels:n})}})).catch((function(t){console.error(t)}))}},{key:"getChildState",value:function(t){this.setState({lightInfo:t})}},{key:"render",value:function(){var t=this;return Object(b.jsx)(g.a,{children:this.state.lightLabels.map((function(e){return Object(b.jsxs)(d.a,{children:[Object(b.jsx)(d.a.Header,{children:Object(b.jsx)(g.a.Toggle,{as:p.a,style:{textDecoration:"none"},variant:"link",eventKey:t.state.lightLabels.indexOf(e).toString(),children:Object(b.jsx)(w,{data:t.state,name:e})})}),Object(b.jsx)(g.a.Collapse,{eventKey:t.state.lightLabels.indexOf(e).toString(),children:Object(b.jsxs)(d.a.Body,{children:[Object(b.jsx)(f,{data:t.state,name:e,onGetChildState:t.getChildState.bind(t)}),Object(b.jsx)("br",{}),Object(b.jsx)(m,{data:t.state,name:e,onGetChildState:t.getChildState.bind(t)}),Object(b.jsx)(A,{data:t.state,name:e,onGetChildState:t.getChildState.bind(t)})]})})]},e)}))})}}]),a}(n.Component),P=a(92),K=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={apiKey:t.props.cookies.get("apiKey")||"",authorised:t.props.cookies.get("authorised")||!1,display:t.props.cookies.get("display")||""},t}return Object(l.a)(a,[{key:"onInputChange",value:function(t){this.setState({apiKey:t.target.value}),this.props.cookies.set("apiKey",t.target.value,{path:"/",maxAge:36e3,secure:!0})}},{key:"onKeySubmit",value:function(){var t=this;fetch("https://api.lifx.com/v1/lights/all",{method:"GET",headers:{Authorization:"Bearer ".concat(this.state.apiKey)}}).then((function(t){if(!t.ok)throw alert("Invalid key. Try again."),new Error("HTTP Status "+t.status);return t.json()})).then((function(e){t.setState({authorised:!0,display:"none"}),t.props.cookies.set("authorised",!0,{path:"/",maxAge:36e3,secure:!0}),t.props.cookies.set("display","none",{path:"/",maxAge:36e3,secure:!0})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t;return this.state.authorised&&(t=Object(b.jsx)(L,{apiKey:this.state.apiKey})),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{width:"300px",margin:"auto",display:this.state.display},children:Object(b.jsx)(u.a,{children:Object(b.jsxs)(u.a.Group,{className:"mb-2",controlId:"formBasicEmail",children:[Object(b.jsx)(u.a.Label,{children:"API Key"}),Object(b.jsx)(u.a.Control,{type:"text",placeholder:"Enter API key",onChange:this.onInputChange.bind(this)}),Object(b.jsx)(u.a.Text,{className:"text-muted",children:"Please enter a valid LifX API key"}),Object(b.jsx)(p.a,{style:{marginTop:"10px"},variant:"primary",onClick:this.onKeySubmit.bind(this),children:"Submit"})]})})}),t]})}}]),a}(n.Component),B=Object(P.a)(K),N=a(93);var V=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("h1",{style:{marginTop:"10px"},children:"LifX Light Controller"}),Object(b.jsx)(N.a,{children:Object(b.jsx)(B,{})})]})},D=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,96)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,o=e.getLCP,s=e.getTTFB;a(t),n(t),i(t),o(t),s(t)}))};s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(V,{})}),document.getElementById("root")),D()}},[[73,1,2]]]);
//# sourceMappingURL=main.73061bfb.chunk.js.map